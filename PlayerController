using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class PlayerContoller : MonoBehaviour {

	public float speed;
	public GUIText itemText;
	public GUIText winText;
	public GUIText StopW;
	private int count;
	private int lapNum;
	private Vector3 movementVector;
	private int rItems;
	private List<string> items = new List<string>();


	void Start()
	{
		AddItems ();
		count = 0;
		SetCountText ();
		winText.text="";
		gameObject.renderer.material.color = Color.yellow;
		renderer.material.color = Color.green;
		StopW.text = "";
		
	}

	void FixedUpdate () 
	{

		movementVector.x = Input.GetAxis("LeftJoyStickX") ;
		movementVector.z = Input.GetAxis("LeftJoyStickY") ;

		Vector3 move = new Vector3 (movementVector.z, 0.0f, movementVector.x);

		rigidbody.AddForce(move * speed * Time.deltaTime);
	
	}


	void OnTriggerEnter(Collider other) 
	{
		if (other.gameObject.tag == "PickUp") 
		{
			other.gameObject.SetActive(false);
			rItems = Random.Range(0,4);
			SetCountText();
		}

		if (other.gameObject.tag == "CheckP") 
		{
			count++;

			if(count == 2)
			{
				lapNum++;
				other.gameObject.SetActive(true);
			}

		}

	}

	void SetCountText()
	{
		string r = items[rItems];
		itemText.text = r;

		if(count==2)
		{
			winText.text = "Lap" + lapNum;
			StopwatchEnd();
		}



	}

	void StopwatchEnd()
	{
		float timer = Time.time;
		//timer = time.Elapsed();
		StopW.text = timer.ToString() + " seconds!";

	}

	void AddItems()
	{
		items.Add ("Paper Ball");
		items.Add ("Coffee");
		items.Add ("Energy Drink");
		items.Add ("Projects");
	}
}
